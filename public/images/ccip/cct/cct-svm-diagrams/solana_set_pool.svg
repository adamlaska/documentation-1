<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="1076.325" height="1228.976" version="1.1"><desc>title%20set_pool%20Instruction%0Aparticipant%20%22Token%20Administrator%22%20as%20Admin%0Aparticipantgroup%20%230847F7%20**%3Ccolor%3A%23white%3EChainlink%20Router%20Program%3C%2Fcolor%3E**%0A%20%20participant%20%22Router%22%20as%20Router%0A%20%20participant%20%22TokenAdminRegistry%20PDA%22%20as%20Registry%0Aend%0Aactivate%20Admin%20%230847F7%0A%0AAdmin-%3ERouter%3A%20set_pool(writable_indexes)%0Aactivate%20Router%20%238AA6F9%0Anote%20right%20of%20Router%20%23F8FAFF%3A%20(1)%20Anchor%20enforces%20authority%20%3D%3D%20registry.administrator%0Aalt%20Authorized%0A%20%20note%20right%20of%20Router%20%23F8FAFF%3A%20(2)%20Store%20new%20ALT%20address%20in%20registry%5CnReset%20old%20writable%20permissions%20%26%20apply%20new%20indexes%0A%20%20Router-%3ERegistry%3A%20%3Ccolor%3A%23white%3Eupdate%20lookup_table%20%26%20writable_indexes%3C%2Fcolor%3E%0A%20%20activate%20Registry%20%238AA6F9%0A%20%20Registry--%3ERouter%3A%20%3Ccolor%3A%23white%3Esuccess%3C%2Fcolor%3E%0A%20%20deactivate%20Registry%0A%20%20alt%20pool_lookuptable%20!%3D%20zero%20address%0A%20%20%20%20note%20right%20of%20Router%20%23F8FAFF%3A%20(3)%20Validate%20ALT%20has%20%E2%89%A59%20required%20accounts%5CnCheck%20token%20mint%20owner%20matches%20token%20program%5CnVerify%20all%20mandatory%20PDA%20addresses%20match%20expected%20values%0A%20%20%20%20Router-%3ERouter%3A%20%3Ccolor%3A%23white%3EValidate%20Look-Up%20Table%0A%20%20%20%20note%20right%20of%20Router%20%23F8FAFF%3A%20On%20success%2C%20token%20is%20enabled%20for%20CCIP%0A%20%20else%20Zero%20address%0A%20%20%20%20note%20right%20of%20Router%20%23F8FAFF%3A%20Delist%20this%20token%20from%20CCIP%0A%20%20end%0A%20%20note%20right%20of%20Router%20%23F8FAFF%3A%20(4)%20Emit%20PoolSet%20event%0A%20%20Router--%3EAdmin%3A%20(success)%0Aelse%20Unauthorized%0A%20%20Router--%3EAdmin%3A%20(error)%20Caller%20not%20current%20token%20admin%0Aend%0Adeactivate%20Router%0Adeactivate%20Admin</desc><g><g><rect width="1076" height="1237" x="0" y="0" fill="#fff" stroke="none"/></g><g><path fill="#0847F7" stroke="#000" stroke-miterlimit="10" stroke-width="1.466" d="M 414.71333751900653 54.286564085727264 L 1067.5290939629244 54.286564085727264 L 1067.5290939629244 1228.9761644707269 L 414.71333751900653 1228.9761644707269 L 414.71333751900653 54.286564085727264 Z" paint-order="fill stroke markers"/><g><text x="650.298" y="78.915" fill="#fff" stroke="none" dominant-baseline="alphabetic" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="bold" text-anchor="start" text-decoration="normal" xml:space="preserve">Chainlink Router Program</text></g></g><g><path fill="none" stroke="#000" stroke-dasharray="13.532 5.864" stroke-miterlimit="10" stroke-width="1.466" d="M 92.65742583544532 143.56473289072727 L 92.65742583544532 1228.9761644707269" paint-order="fill stroke markers"/><path fill="none" stroke="#000" stroke-dasharray="13.532 5.864" stroke-miterlimit="10" stroke-width="1.466" d="M 464.59698253169796 143.56473289072727 L 464.59698253169796 1228.9761644707269" paint-order="fill stroke markers"/><path fill="none" stroke="#000" stroke-dasharray="13.532 5.864" stroke-miterlimit="10" stroke-width="1.466" d="M 955.3190558227917 143.56473289072727 L 955.3190558227917 1228.9761644707269" paint-order="fill stroke markers"/></g><g><path fill="none" stroke="none"/><g><path fill="#fff" stroke="#000" stroke-miterlimit="10" stroke-width="2.815" d="M 8.795878700000003 96.24290548472726 L 176.51897297089064 96.24290548472726 L 176.51897297089064 143.56473289072727 L 8.795878700000003 143.56473289072727 L 8.795878700000003 96.24290548472726 Z" paint-order="fill stroke markers"/></g><g><text x="27.883" y="125.973" fill="#000" stroke="none" dominant-baseline="alphabetic" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-anchor="start" text-decoration="normal" xml:space="preserve">Token Administrator</text></g><path fill="none" stroke="none"/><g><path fill="#fff" stroke="#000" stroke-miterlimit="10" stroke-width="2.815" d="M 423.50921621900653 96.24290548472726 L 505.68474884438933 96.24290548472726 L 505.68474884438933 143.56473289072727 L 423.50921621900653 143.56473289072727 L 423.50921621900653 96.24290548472726 Z" paint-order="fill stroke markers"/></g><g><text x="442.596" y="125.973" fill="#000" stroke="none" dominant-baseline="alphabetic" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-anchor="start" text-decoration="normal" xml:space="preserve">Router</text></g><path fill="none" stroke="none"/><g><path fill="#fff" stroke="#000" stroke-miterlimit="10" stroke-width="2.815" d="M 851.9048963826589 96.24290548472726 L 1058.7332152629244 96.24290548472726 L 1058.7332152629244 143.56473289072727 L 851.9048963826589 143.56473289072727 L 851.9048963826589 96.24290548472726 Z" paint-order="fill stroke markers"/></g><g><text x="870.992" y="125.973" fill="#000" stroke="none" dominant-baseline="alphabetic" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-anchor="start" text-decoration="normal" xml:space="preserve">TokenAdminRegistry PDA</text></g></g><g><path fill="#0847F7" stroke="#000" stroke-miterlimit="10" stroke-width="1.466" d="M 83.86154713544532 152.36061159072725 L 101.45330453544533 152.36061159072725 L 101.45330453544533 1167.4050135707269 L 83.86154713544532 1167.4050135707269 Z" paint-order="fill stroke markers"/><path fill="#8AA6F9" stroke="#000" stroke-miterlimit="10" stroke-width="1.466" d="M 455.80110383169796 201.61753231072726 L 473.39286123169796 201.61753231072726 L 473.39286123169796 1167.4050135707269 L 455.80110383169796 1167.4050135707269 Z" paint-order="fill stroke markers"/><path fill="#8AA6F9" stroke="#000" stroke-miterlimit="10" stroke-width="1.466" d="M 946.5231771227917 449.6613116507272 L 964.1149345227917 449.6613116507272 L 964.1149345227917 498.9182323707272 L 946.5231771227917 498.9182323707272 Z" paint-order="fill stroke markers"/><g><text x="445.515" y="26.548" fill="#000" stroke="none" dominant-baseline="alphabetic" font-family="sans-serif" font-size="16pt" font-style="normal" font-weight="normal" text-anchor="start" text-decoration="normal" xml:space="preserve">set_pool Instruction</text></g><g><text x="191.433" y="194.581" fill="#000" stroke="none" dominant-baseline="alphabetic" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-anchor="start" text-decoration="normal" xml:space="preserve">set_pool(writable_indexes)</text></g><g><path fill="none" stroke="#000" stroke-miterlimit="10" stroke-width="1.466" d="M 101.45330453544533 201.61753231072726 L 441.31722357236464 201.61753231072726" paint-order="fill stroke markers"/><g><path fill="#000" stroke="none" d="M 441.1413059983646 194.28763339406058 L 455.80110383169796 201.61753231072726 L 441.1413059983646 208.94743122739393 Z" paint-order="stroke fill markers" transform="translate(455.80110383169796,201.61753231072726) translate(-455.80110383169796,-201.61753231072726)"/></g></g><path fill="none" stroke="#000" stroke-miterlimit="10" stroke-width="1.466" d="M 473.39286123169796 248.23568942072725 L 482.18873993169797 248.23568942072725" paint-order="fill stroke markers"/><path fill="#F8FAFF" stroke="#000" stroke-miterlimit="10" stroke-width="1.466" d="M 482.18873993169797 228.00516841072726 L 865.7059439819324 228.00516841072726 L 881.5385256419323 243.83775007072725 L 881.5385256419323 268.46621043072724 L 482.18873993169797 268.46621043072724 Z" paint-order="fill stroke markers"/><path fill="none" stroke="#000" stroke-miterlimit="10" stroke-width="1.466" d="M 865.7059439819324 228.00516841072726 L 865.7059439819324 243.83775007072725 L 881.5385256419323 243.83775007072725" paint-order="fill stroke markers"/><g><text x="506.817" y="252.634" fill="#000" stroke="none" dominant-baseline="alphabetic" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-anchor="start" text-decoration="normal" xml:space="preserve">(1) Anchor enforces authority == registry.administrator</text></g><path fill="none" stroke="#000" stroke-miterlimit="10" stroke-width="1.466" d="M 473.39286123169796 371.3779912207272 L 482.18873993169797 371.3779912207272" paint-order="fill stroke markers"/><path fill="#F8FAFF" stroke="#000" stroke-miterlimit="10" stroke-width="1.466" d="M 482.18873993169797 342.35159151072725 L 852.9572409790027 342.35159151072725 L 868.7898226390026 358.18417317072726 L 868.7898226390026 400.40439093072723 L 482.18873993169797 400.40439093072723 Z" paint-order="fill stroke markers"/><path fill="none" stroke="#000" stroke-miterlimit="10" stroke-width="1.466" d="M 852.9572409790027 342.35159151072725 L 852.9572409790027 358.18417317072726 L 868.7898226390026 358.18417317072726" paint-order="fill stroke markers"/><g><text x="506.817" y="366.98" fill="#000" stroke="none" dominant-baseline="alphabetic" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-anchor="start" text-decoration="normal" xml:space="preserve">(2) Store new ALT address in registry</text><text x="506.817" y="384.572" fill="#000" stroke="none" dominant-baseline="alphabetic" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-anchor="start" text-decoration="normal" xml:space="preserve">Reset old writable permissions &amp; apply new indexes</text></g><g><text x="580.37" y="442.625" fill="#fff" stroke="none" dominant-baseline="alphabetic" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-anchor="start" text-decoration="normal" xml:space="preserve">update lookup_table &amp; writable_indexes</text></g><g><path fill="none" stroke="#000" stroke-miterlimit="10" stroke-width="1.466" d="M 473.39286123169796 449.6613116507272 L 932.0392968634584 449.6613116507272" paint-order="fill stroke markers"/><g><path fill="#000" stroke="none" d="M 931.8633792894584 442.33141273406056 L 946.5231771227917 449.6613116507272 L 931.8633792894584 456.99121056739386 Z" paint-order="stroke fill markers" transform="translate(946.5231771227917,449.6613116507272) translate(-946.5231771227917,-449.6613116507272)"/></g></g><g><text x="683.48" y="491.882" fill="#fff" stroke="none" dominant-baseline="alphabetic" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-anchor="start" text-decoration="normal" xml:space="preserve">success</text></g><g><path fill="none" stroke="#000" stroke-dasharray="7.037" stroke-miterlimit="10" stroke-width="1.466" d="M 946.5231771227917 498.9182323707272 L 487.8767414910313 498.9182323707272" paint-order="fill stroke markers"/><g><path fill="#000" stroke="none" d="M 488.0526590650313 491.58833345406055 L 473.39286123169796 498.9182323707272 L 488.0526590650313 506.24813128739385 Z" paint-order="stroke fill markers" transform="translate(473.39286123169796,498.9182323707272) translate(-473.39286123169796,-498.9182323707272)"/></g></g><path fill="none" stroke="#000" stroke-miterlimit="10" stroke-width="1.466" d="M 473.39286123169796 610.6258918607272 L 482.18873993169797 610.6258918607272" paint-order="fill stroke markers"/><path fill="#F8FAFF" stroke="#000" stroke-miterlimit="10" stroke-width="1.466" d="M 482.18873993169797 572.8036134507272 L 904.3029593627917 572.8036134507272 L 920.1355410227917 588.6361951107272 L 920.1355410227917 648.4481702707271 L 482.18873993169797 648.4481702707271 Z" paint-order="fill stroke markers"/><path fill="none" stroke="#000" stroke-miterlimit="10" stroke-width="1.466" d="M 904.3029593627917 572.8036134507272 L 904.3029593627917 588.6361951107272 L 920.1355410227917 588.6361951107272" paint-order="fill stroke markers"/><g><text x="506.817" y="597.432" fill="#000" stroke="none" dominant-baseline="alphabetic" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-anchor="start" text-decoration="normal" xml:space="preserve">(3) Validate ALT has ≥9 required accounts</text><text x="506.817" y="615.024" fill="#000" stroke="none" dominant-baseline="alphabetic" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-anchor="start" text-decoration="normal" xml:space="preserve">Check token mint owner matches token program</text><text x="506.817" y="632.616" fill="#000" stroke="none" dominant-baseline="alphabetic" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-anchor="start" text-decoration="normal" xml:space="preserve">Verify all mandatory PDA addresses match expected values</text></g><g><text x="496.849" y="690.668" fill="#fff" stroke="none" dominant-baseline="alphabetic" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-anchor="start" text-decoration="normal" xml:space="preserve">Validate Look-Up Table</text></g><g><path fill="none" stroke="#000" stroke-miterlimit="10" stroke-width="1.466" d="M 473.39286123169796 697.7050909907271 L 543.7598908316979 697.7050909907271 L 543.7598908316979 720.5743756107271 L 487.8767414910313 720.5743756107271" paint-order="fill stroke markers"/><g><path fill="#000" stroke="none" d="M 488.0526590650313 713.2444766940604 L 473.39286123169796 720.5743756107271 L 488.0526590650313 727.9042745273938 Z" paint-order="stroke fill markers" transform="translate(473.39286123169796,720.5743756107271) translate(-473.39286123169796,-720.5743756107271)"/></g></g><path fill="none" stroke="#000" stroke-miterlimit="10" stroke-width="1.466" d="M 473.39286123169796 767.1925327207272 L 482.18873993169797 767.1925327207272" paint-order="fill stroke markers"/><path fill="#F8FAFF" stroke="#000" stroke-miterlimit="10" stroke-width="1.466" d="M 482.18873993169797 746.9620117107271 L 767.3953818481433 746.9620117107271 L 783.2279635081433 762.7945933707271 L 783.2279635081433 787.4230537307271 L 482.18873993169797 787.4230537307271 Z" paint-order="fill stroke markers"/><path fill="none" stroke="#000" stroke-miterlimit="10" stroke-width="1.466" d="M 767.3953818481433 746.9620117107271 L 767.3953818481433 762.7945933707271 L 783.2279635081433 762.7945933707271" paint-order="fill stroke markers"/><g><text x="506.817" y="771.59" fill="#000" stroke="none" dominant-baseline="alphabetic" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-anchor="start" text-decoration="normal" xml:space="preserve">On success, token is enabled for CCIP</text></g><path fill="none" stroke="#000" stroke-miterlimit="10" stroke-width="1.466" d="M 473.39286123169796 881.5389558207272 L 482.18873993169797 881.5389558207272" paint-order="fill stroke markers"/><path fill="#F8FAFF" stroke="#000" stroke-miterlimit="10" stroke-width="1.466" d="M 482.18873993169797 861.3084348107271 L 691.5829581420886 861.3084348107271 L 707.4155398020886 877.1410164707271 L 707.4155398020886 901.7694768307272 L 482.18873993169797 901.7694768307272 Z" paint-order="fill stroke markers"/><path fill="none" stroke="#000" stroke-miterlimit="10" stroke-width="1.466" d="M 691.5829581420886 861.3084348107271 L 691.5829581420886 877.1410164707271 L 707.4155398020886 877.1410164707271" paint-order="fill stroke markers"/><g><text x="506.817" y="885.937" fill="#000" stroke="none" dominant-baseline="alphabetic" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-anchor="start" text-decoration="normal" xml:space="preserve">Delist this token from CCIP</text></g><path fill="none" stroke="#000" stroke-miterlimit="10" stroke-width="1.466" d="M 473.39286123169796 974.7752700407272 L 482.18873993169797 974.7752700407272" paint-order="fill stroke markers"/><path fill="#F8FAFF" stroke="#000" stroke-miterlimit="10" stroke-width="1.466" d="M 482.18873993169797 954.5447490307271 L 662.2772940795886 954.5447490307271 L 678.1098757395886 970.377330690727 L 678.1098757395886 995.0057910507271 L 482.18873993169797 995.0057910507271 Z" paint-order="fill stroke markers"/><path fill="none" stroke="#000" stroke-miterlimit="10" stroke-width="1.466" d="M 662.2772940795886 954.5447490307271 L 662.2772940795886 970.377330690727 L 678.1098757395886 970.377330690727" paint-order="fill stroke markers"/><g><text x="506.817" y="979.173" fill="#000" stroke="none" dominant-baseline="alphabetic" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-anchor="start" text-decoration="normal" xml:space="preserve">(4) Emit PoolSet event</text></g><g><text x="247.267" y="1037.226" fill="#000" stroke="none" dominant-baseline="alphabetic" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-anchor="start" text-decoration="normal" xml:space="preserve">(success)</text></g><g><path fill="none" stroke="#000" stroke-dasharray="7.037" stroke-miterlimit="10" stroke-width="1.466" d="M 455.80110383169796 1044.262711770727 L 115.93718479477866 1044.262711770727" paint-order="fill stroke markers"/><g><path fill="#000" stroke="none" d="M 116.11310236877866 1036.9328128540603 L 101.45330453544533 1044.262711770727 L 116.11310236877866 1051.5926106873937 Z" paint-order="stroke fill markers" transform="translate(101.45330453544533,1044.262711770727) translate(-101.45330453544533,-1044.262711770727)"/></g></g><g><text x="158.044" y="1133.981" fill="#000" stroke="none" dominant-baseline="alphabetic" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-anchor="start" text-decoration="normal" xml:space="preserve">(error) Caller not current token admin</text></g><g><path fill="none" stroke="#000" stroke-dasharray="7.037" stroke-miterlimit="10" stroke-width="1.466" d="M 455.80110383169796 1141.0173774707268 L 115.93718479477866 1141.0173774707268" paint-order="fill stroke markers"/><g><path fill="#000" stroke="none" d="M 116.11310236877866 1133.6874785540601 L 101.45330453544533 1141.0173774707268 L 116.11310236877866 1148.3472763873935 Z" paint-order="stroke fill markers" transform="translate(101.45330453544533,1141.0173774707268) translate(-101.45330453544533,-1141.0173774707268)"/></g></g><g><path fill="none" stroke="#000" stroke-miterlimit="10" stroke-width="2.513" d="M 22.290396235445332 294.85384653072725 L 1016.8902067227917 294.85384653072725 L 1016.8902067227917 1167.4050135707269 L 22.290396235445332 1167.4050135707269 L 22.290396235445332 294.85384653072725 Z" paint-order="fill stroke markers"/><path fill="#fff" stroke="#000" stroke-miterlimit="10" stroke-width="2.513" d="M 22.290396235445332 294.85384653072725 L 22.290396235445332 315.96395541072724 L 71.16270803251564 315.96395541072724 L 81.71776247251563 305.40890097072725 L 81.71776247251563 294.85384653072725 L 22.290396235445332 294.85384653072725" paint-order="fill stroke markers"/><text x="39.882" y="308.927" fill="#000" stroke="none" dominant-baseline="alphabetic" font-family="sans-serif" font-size="8.8pt" font-style="normal" font-weight="bold" text-anchor="start" text-decoration="normal" xml:space="preserve">alt</text><g><rect width="74.34" height="18.295" x="96.671" y="296.261" fill="#fff" stroke="none"/></g><text x="99.31" y="308.927" fill="#000" stroke="none" dominant-baseline="alphabetic" font-family="sans-serif" font-size="8.8pt" font-style="normal" font-weight="bold" text-anchor="start" text-decoration="normal" xml:space="preserve">[Authorized]</text><g><path fill="none" stroke="#000" stroke-dasharray="4.398" stroke-miterlimit="10" stroke-width="2.513" d="M 22.290396235445332 1070.6503478707268 L 1016.8902067227917 1070.6503478707268" paint-order="fill stroke markers"/></g><g><rect width="88.029" height="18.295" x="96.671" y="1072.058" fill="#fff" stroke="none"/></g><text x="99.31" y="1084.724" fill="#000" stroke="none" dominant-baseline="alphabetic" font-family="sans-serif" font-size="8.8pt" font-style="normal" font-weight="bold" text-anchor="start" text-decoration="normal" xml:space="preserve">[Unauthorized]</text></g><g><path fill="none" stroke="#000" stroke-miterlimit="10" stroke-width="2.513" d="M 403.025831631698 525.3058684707272 L 928.9314197227917 525.3058684707272 L 928.9314197227917 928.1571129307272 L 403.025831631698 928.1571129307272 L 403.025831631698 525.3058684707272 Z" paint-order="fill stroke markers"/><path fill="#fff" stroke="#000" stroke-miterlimit="10" stroke-width="2.513" d="M 403.025831631698 525.3058684707272 L 403.025831631698 546.4159773507272 L 451.8981434287683 546.4159773507272 L 462.4531978687683 535.8609229107273 L 462.4531978687683 525.3058684707272 L 403.025831631698 525.3058684707272" paint-order="fill stroke markers"/><text x="420.618" y="539.379" fill="#000" stroke="none" dominant-baseline="alphabetic" font-family="sans-serif" font-size="8.8pt" font-style="normal" font-weight="bold" text-anchor="start" text-decoration="normal" xml:space="preserve">alt</text><g><rect width="199.83" height="18.295" x="477.406" y="526.713" fill="#fff" stroke="none"/></g><text x="480.045" y="539.379" fill="#000" stroke="none" dominant-baseline="alphabetic" font-family="sans-serif" font-size="8.8pt" font-style="normal" font-weight="bold" text-anchor="start" text-decoration="normal" xml:space="preserve">[pool_lookuptable != zero address]</text><g><path fill="none" stroke="#000" stroke-dasharray="4.398" stroke-miterlimit="10" stroke-width="2.513" d="M 403.025831631698 813.8106898307271 L 928.9314197227917 813.8106898307271" paint-order="fill stroke markers"/></g><g><rect width="86.757" height="18.295" x="477.406" y="815.218" fill="#fff" stroke="none"/></g><text x="480.045" y="827.884" fill="#000" stroke="none" dominant-baseline="alphabetic" font-family="sans-serif" font-size="8.8pt" font-style="normal" font-weight="bold" text-anchor="start" text-decoration="normal" xml:space="preserve">[Zero address]</text></g></g></g></svg>